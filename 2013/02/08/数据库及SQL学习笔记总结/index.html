<!doctype html>
<html class="theme-next use-motion ">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>




<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.4"/>


    <meta name="description" content="晓风博客是一个以技术成长、设计生活、个人心得为主题的个人博客，旨在与你分享生活点滴，共同成长。" />



  <meta name="keywords" content="科技改变生活," />



  <link rel="alternate" href="/atom.xml" title="晓风博客" type="application/atom+xml" />



  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.4" />


<meta content="晓风博客" property="og:site_name">
<meta content="数据库及SQL学习笔记总结" property="og:title">
<meta content="http://liyaodong.com/2013/02/08/数据库及SQL学习笔记总结/" property="og:url">
<meta content="article" property="og:type">
<meta content="晓风博客是一个以技术成长、设计生活、个人心得为主题的个人博客，旨在与你分享生活点滴，共同成长。" property="og:description">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: '',
    analytics: {
      google: 'UA-30027709-1'
    },
    sidebar: 'hide'
  };
</script>




  <title> 数据库及SQL学习笔记总结 // 晓风博客 </title>
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>
</head>

<body>
  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->

  <div class="container one-column page-post-detail">
    <div id="header" class="header">
      <div class="header-inner">
        <h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <span class="logo windmill-logo">
    <i class="windmill-top"></i>
    <i class="windmill-dot"></i>
    <i class="windmill-base"></i>
  </span>
  <a href="/" class="brand windmill-hover">
    <span class="site-title">晓风博客</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<div class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/">
            <i class="menu-item-icon icon-home"></i> <br />
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            <i class="menu-item-icon icon-archives"></i> <br />
            归档
          </a>
        </li>
      
    </ul>
  

  
</div>

      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              数据库及SQL学习笔记总结
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2013-02-08
        </span>

        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2013/02/08/数据库及SQL学习笔记总结/#comments" >
              <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2013/02/08/数据库及SQL学习笔记总结/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        <p>SQL（Structrued Query Language,结构化查询语言），或许你暂时不知道SQL是什么，但是你很可能已经用过了。SQL是一种数据库查询和程序设计语言，用于存取数据以及查询、更新和管理关系数据库系统。所以不管是MySQL、Oracle、SQL Server还是轻量级的Access还有上大学之前没听过的VF（计算机二级才听说的），都可以使用SQL这种结构化查询语言对数据库进行操作。<a id="more"></a></p>
<p>PDF版本文章及源码下载：<a href="http://pan.baidu.com/share/link?shareid=254146&amp;uk=3171893396" target="_blank" rel="external">http://pan.baidu.com/share/link?shareid=254146&amp;uk=3171893396</a></p>
<p>原文链接：<a href="http://liyaodong.sinaapp.com/?p=1131" target="_blank" rel="external">http://liyaodong.sinaapp.com/?p=1131</a></p>
<p>作为一名网站开发初学者，我接触SQL的过程是这样的：接触ASP、PHP时发现里面有很多自己不懂的代码，然后为了实现某些功能，不如调用数据库文章，百度有用的代码。百度来的代码大多是这样子的：</p>
<figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div></pre></td><td class="code"><pre><div class="line">$SQL=&amp;quot;SELECT * FROM `tablename` where `tableColum` = `condition`&amp;quot;;</div><div class="line">$query=mysql_query($SQL);</div><div class="line"><span class="keyword">if</span>(mysql_num_rows($query)&amp;gt;<span class="number">0</span>)&#123;</div><div class="line">	<span class="keyword">while</span>($row=mysql_fetch_array($query))&#123;</div><div class="line">		<span class="comment">//Do something ,for example output the name field</span></div><div class="line">		<span class="keyword">echo</span> $row[<span class="string">'name'</span>];</div><div class="line">        &#125;</div><div class="line">&#125;</div></pre></td></tr></table></figure>
<p>这是一个典型的数据库文章调用，而其中的$SQL则是一个SQL语句的查询变量，通过mysql_query函数执行SQL语句，然后将结果返回到$query变量中。然后判断查询结果集的数量是否为空，如果有东西，然后就进行输出内容等等。</p>
<pre><code>自学就是这样子的，很多东西都是半途才知道的，没有人去给你指点你应该有怎么样的以系统的学习路线。于是我开始百度这些语句的名字，发现这些语句，例如SELECT * FROM `tablename` where `tableColum` = `condition`的这些语句称之为SQL语句。然后接下来我就在W3C上找到了关于SQL的说明文档以及教程。就是从这开始慢慢学习SQL语句的。

我是从PHP+MySQL来开始学习数据库的，配置好服务器的相关服务（Apache、MySQL、Subversion etc...）之后，就可以通过phpMyAdmin来管理自己的MySQL数据库（登录地址通常是yourhost/phpmyadmin/），登录自己配置的数据库账号密码之后就可以看到这样的一个界面
</code></pre><p><a href="http://liyaodong.qiniudn.com/uploads/2013/02/phpmyadmin.png" target="_blank" rel="external"><img src="http://liyaodong.qiniudn.com/uploads/2013/02/phpmyadmin.png" alt="" title="phpmyadmin"></a></p>
<pre><code>可以看到，左上角是其LOGO，之下是常用的操作，首页什么的，走丢了可以在这返回。而底下的列表则是你当前的数据库列表。右侧的几个TAB则是你点击次数最多的地方，这里可以对数据库或者表进行查看、结构查看、SQL语句运行、删除等操作。而右下方则是当前服务器的一些信息。学习数据库，或者SQL，我觉的首先应该明确几个概念：
</code></pre><ol>
<li>数据库系统(Database Systems)：例如SQL Server、Oracle、DB2等</li>
<li>SQL(Structrued Query Language)：可以用这个来对多种数据库系统进行结构化操作，一种语言</li>
<li>数据库服务器(Database Server)：指的是MySQL数据库所运行的母体，就是你安装的MySQL</li>
<li>数据库(Database)：一个数据库服务器可以建立很多的数据库，就像一个图书馆可以有很多个藏书库</li>
<li>表(Table)：一个数据库可以有很多的表，就像图书馆的一个书库可以有很多的书架一样</li>
<li>列(Column)：一个表内由行和列组成，列是竖向的，想想书架</li>
<li>行(Row)：一个表中的行，书架中的一层一层</li>
</ol>
<p>某种程度上我觉得Excel和数据库有点像，可以从Excel来理解。一个Excel文件就相当于一个数据库。Excel的最下方有Sheet1、Sheet2之类的，也就是说一个Excel文件可以有几张表格。同样数据库也是，一个数据库可以有很多张表，一张表内有行和列。在这些方面Excel和数据库是相通的。事实上Excel中的表格也可以很方便的导入到MySQL中，通过将Excel的文件另存为OpenDocument（.ods）文件，然后在MySQL中可以进行导入。为什么是OpenDocument格式的？不知道，我一个一个试出来的。或许是Open吧，MySQL和OpenOffice都是开源产物。</p>
<p>或许现在你已经对数据库有了一个初步的概念，但是有很多问题我们现在还不能解决。别着急，慢慢来。通过phpMyAdmin这个由PHP开发的GUI(图形化界面)工具可以很方便的对MySQL数据库进行管理，GUI界面既可以点来点去，同时也可以进行SQL语言查询。很灵活很方便，同时这个工具又是基于Web的，所以不需要你安装客户端软件，多么方便。其实选则这个工具来学习SQL更多的是因为其有着良好的SQL提示，当你点击创建表，或者增加数据，或者查看数据的时候可以看到你点来点去用SQL语句是怎样操作的。这对于学习SQL来说很方便。</p>
<p><a href="http://liyaodong.qiniudn.com/uploads/2013/02/sqlgui.png" target="_blank" rel="external"><img src="http://liyaodong.qiniudn.com/uploads/2013/02/sqlgui.png" alt="" title="sqlgui"></a></p>
<p>可以看到点击浏览后，执行的SQL语句是SELECT * FROM <code>pmw_info</code> LIMIT 0, 30</p>
<p>SQL的书写方式一般是系统函数用大写，如SELECT，*代表所有的意思，pmw_info是表名，而表名需要用Esc底下的那个键，就是1234的左边那个<code>，这个</code>是SQL独有的一种符号，不是单引号。</p>
<p>到这里你已经可以对MySQL进行一些简单的操作了，比如删除表格，增加表格之类的。毕竟有这么一个GUI界面，可以点来点去。下面将介绍增加表格、删除表格的一些注意事项，这将关乎你的数据库效率的问题，学术上称之为数据库设计。这里由于水平有限，只总结一下常见的操作。</p>
<h3 id="一、-新建数据库及表"><a href="#一、-新建数据库及表" class="headerlink" title="一、   新建数据库及表"></a>一、   新建数据库及表</h3><p>理论上MySQL新建立之后是没有数据库的，不过有点会有一个test数据库。点击数据库tab，底下就会列出你当前的数据库列表以及新建数据库。输入你要新建的数据库名称，然后后边默认是整理，后边的框是你的数据库使用怎样的一种编码。一般情况下默认即可。点击创建，一个数据库就创建成功了。新建成功后左侧数据库列表中就会出现你的数据库列表。进入你的数据库中是没有表的。你可以新建数据表。新建数据表的时候会有很多的选项，这个时候你可能就懵了。反正我第一次是这样子的。</p>
<p>首先可以确定的是<strong>数据库表名</strong>，这个随意啦。然后是字段(field)名，<strong>字段名</strong>可以理解为列的名称。比如你要做一个关于班级信息的数据表，你很有可能有这些列：学号、姓名、出生年月、性别、电话等等。而这些就是列名。需要注意的是，列名要用英文来表示，否则你会有麻烦的。确定列名之后会有列的<strong>类型</strong>，有很多类型可以选择。这里简单的介绍几种常见的类型，方便你选择的时候做参考。如果你觉得不够完整可以百度一下MySQL字段类型讲解，会很详细。</p>
<p>INT：学过C的应该都知道，整型。如果是会员ID之类的，这个就可以满足了。</p>
<p>DATA：日期类型，如果你要存储的是生日，这将会是最好的选择。其格式为YYYY-MM-DD，例如1994-10-20</p>
<p>DATETIME：日期和时间的组合，YYYY-MM-DD HH:MM:SS格式的，例如2013-02-09 23:59:59</p>
<p>CHAR：定长字符型，适合存储知道长度的数据类型，比如学号，201193014000总是12位数的，很适合用一个12位长度的CHAR类型。为什么不用INT呢？我觉得学号不用于计算，所以字符型会更适合。</p>
<p>VARCHAR：变长字符串，可以设定最大存储位数的。比如要存储用户名，很适合用这个。你可以设定用户名长度不能超过20，而字段类型就可以设置为VARCHAR，然后限制为20位。如果用户名是10位，那么剩下的没有占用的10位长度就会自动删除。而CHAR类型则会以空格来填满剩下的字符类型。这就是VARCHAR和CHAR类型的区别。</p>
<p>TEXT：顾名思义，文字类型。其最大长度为65535，设置TEXT字段类型后可以进行全文检索。有什么比TEXT字段类型更适合存储文章呢？当然，如果是小说就要注意了。</p>
<p>BINARY：二进制类型，如果你的密码是经过AES加密算法进行加密的，你必须选择二进制来存储密码。当然如果你MD5加密，那么你应该选择CHAR或者VARCHAR。</p>
<p>介绍完字段类型后你可以根据自己的需要进行设计字段类型，比如电话号码什么的应该设置为CHAR，而姓名应该设置成VARCHAR，至于之后的长度，根据你的需求进行设置。接下来就是设置<strong>默认</strong>了，默认指的是如果这个列没有内容默认是什么，经典的应用场景就是密码了。你可以在此设置一个默认密码，选择定义然后填入你的默认密码。当然需要注意如果你的网站验证采用加密，你输入的默认密码也应该是加密后的字符串。再往后就是<strong>整理</strong>了，需要注意的是，如果包含中文，那么你需要设置整理的类型为utf8_general_ci或者gbk_chinese_ci或者gb2312_chinese_ci，推荐使用utf8编码格式。再往后就是<strong>属性</strong>，一般情况下这个我也是会默认的。有一个选项是on update CURRENT_TIMESTAMP意思是根据更新时的时间戳。或许这个可以用来作为最后一次更改时间。再往后就是<strong>空</strong>的单选框，像用户名这类非空字段应该勾上，不允许用户名为空。再往后的<strong>索引</strong>，这个是用来进行数据库搜索的时候需要用到的，有几个选项，这个应该详解一下，因为这在很大程度长影响着数据库的效率。如果咱们用来选课的教务管理系统做好优化，我想就不会出现选课杯具了。暂时不吐槽学校的渣滓选课系统了。   数据库索引好比是一本书前面的目录，能加快数据库的查询速度。如果你添加了索引，就好比提前把数据库中这列的内容���������成目录放到了内存中，而不需要你进行一一对比。在数据库内容越来越多的时候，这将会体现出你的效率。当然在设计大的数据库系统的时候，你需要更多的学习关于索引的知识。这里只是入门。</p>
<p>索引的选项有下面几个：</p>
<p>PRIMARY：主键(primary key)，主要关键字，它的值用于唯一地标识表中的某一条记录。一个表不能有多个主键，因为这样就失去了主键存在的意义。同时主键还是几张表相互联系识别的基础，所以每张表最好有一个主键。例如学生信息表，可以添加一个ID为主键，很多系统都是这样做的。比如新浪微博、腾讯微博号等，都会有一个OID，这个OID就是用来标示唯一用户的ID，这样做的目的很明确，可以让你唯一的确定一个结果。作为主键，需要注意几个方面：①一个表中只能有一个主键，这是主键的意义。事实上，即使你建立了两个主键，之前的主键就会自动取消。②主键对用户来说应当是没有意义的，想想新浪微博OID，那一串数字，对你来说只是一个唯一标示而已。③主键不需要被更新，也不需要删除。主键通常是由系统自动创建的，设置AUTO_INCREMENT为TRUE即可让系统自动更新值。④主键不应包含动态的数据，如时间等。综合来看，像ID之类的就最适合用来做唯一标示的主键了。</p>
<p>UNIQUE：唯一键，不同于主键之处就是这个可以有很多个列都是唯一键。比如用户名要求唯一可以设定唯一键，其他有同样需求的也可以设置为唯一键。</p>
<p>INDEX：设置索引，对于经常需要以此列为条件进行搜索的可以设置为索引，加快搜索速度。但是不是说每个列都加上INDEX属性搜索就会更快。为某列加索引会增加硬盘开支和存储空间，尤其在大数据库设计的时候，所以你要权衡性能的平衡点。像文章标题之类的可以进行INDEX索引。另外有一个好的例子就是用户名和密码使用联合索引。因为这样在SQL语句中使用WHERE条件判定的时候效率会高很多。至于如何联合索引，就是勾选上用户名和密码的列，然后在底下设置索引，联合索引就搞定了。</p>
<p>FULLTEXT：全文索引，这个是最适合文章字段的索引属性了，不是吗？结果是NO，为什么呢？因为FULLTEXT不支持中文。很遗憾的意见事情，虽然也有人用其他方法解决了，但是依然很难用。所以在中文搜索上，FULLTEXT显的无能为力。</p>
<p>总结一下字段索引的取舍，所有的一切，都不能被这些所约束，具体的设置还是要根据你的数据库进行具体问题具体分析。如果都套框框的话，那也就不会有数据库设计这门学问了。所以在实战中，还是要具体问题具体分析，如果你不需要搜索某个字段，那么请不要设置索引属性。这将有利于你的数据库设计更加合理。</p>
<p>接下来的AUTO_INCREMENT属性了，这个是自动插入，没什么好说的，作为主键ID，你应该勾选上，这样每次ID值都会自动增加。再后边的<strong>注释</strong>，可以自由发挥了。懒人都是默认，至少我是。</p>
<p>设置好字段类型及名称之后接下来就是标注释、存储引擎、整理、分区定义了，这个根据自己的需求啦。如果有兴趣可以研究一下存储引擎的区别。默认使用MyISAM或者InnoDB即可，推荐使用MyISAM。全部设置好之后点击保存即可。一个数据库，一张表就建成了。</p>
<h3 id="二、-常用SQL语句"><a href="#二、-常用SQL语句" class="headerlink" title="二、   常用SQL语句"></a>二、   常用SQL语句</h3><p>常见的就是CREATE、DROP、RENAME、ALTER这几个还有SELECT、INSERT、UPDATE、DELETE这几个，后面四个更常用。</p>
<p>创建一个数据库命令：CREATE TABLE</p>
<p>删除一个数据库命令：DROP TABLE</p>
<p>修改一个字段名称：RENAME TABLE <code>原字段</code> TO <code>新字段</code> ;</p>
<p>删除一个字段：ALTER TABLE <code>表</code>  DROP <code>原字段</code></p>
<p>插入一个字段：ALTER TABLE <code>表</code>  ADD <code>新字段</code> …  AFTER <code>原字段</code></p>
<p>其实上面的这几个不太常用，至少我记不住，因为通常都是在GUI界面下完成数据库及表的创建和操作的，因为这会节省你不少的时间，不过为了成为一名功夫扎实的开发者，还是有必要知道这些命令的用法的，举个例子来说明吧：</p>
<p>CREATE TABLE <code>test</code> (</p>
<p>  <code>id</code> int(10)  NOT NULL auto_increment,</p>
<p>  <code>uid</code> varchar(10) NOT NULL  default ‘0’,</p>
<p>  <code>regdate</code>  date NOT NULL,</p>
<p>  <code>remark</code>    text  NULL,</p>
<p>   PRIMARY KEY  (<code>id</code>)</p>
<p>)</p>
<p>上面的SQL命令则是创建了表test，其包含4个字段，id、uid、regdate、remark并设置了其属性。需要注意的是主键即id字段必须设置为NOT NULL即非空属性，剩下的应该很容易就能看懂。毕竟SQL还是很接近英语的。</p>
<p>SELECT语句：<strong>SELECT 查询字段 FROM 表名 WHERE 条件</strong></p>
<p>这个是使用频率最高的一个语句了，所以务必得搞清楚，不然SQL就白学了。比如要在userinfo表中检索出用户名为webgeek的行，可以这样写：</p>
<p>SELECT * FROM <code>userinfo</code> WHERE <code>username</code> = <code>webgeek</code>;</p>
<p>很简单吧，SQL本来就不难。下面给出常用条件的格式</p>
<p>= 等于 、&lt;&gt;不等于、in 包含 、 not in 不包含、 like 匹配、  BETWEEN  在范围  、 not BETWEEN  不在范围</p>
<p>另外也可以使用联合条件如and、or</p>
<p>加入要验证用户名和密码，可以这样写：</p>
<p>SELECT * FROM <code>userinfo</code> WHERE <code>username</code> = <code>webgeek</code> AND <code>password</code> = <code>123456</code>;</p>
<p>当然这个例句只是为了说明and的用法，如果实际开发中这样写你就挂了，这会让你的网站暴露在SQL注入攻击的危害之下。后面会讲到SQL和PHP的联合使用的。</p>
<p>INSERT语句：<strong>INSERT INTO 表名 (字段…,…) VALUES(值…,…)</strong></p>
<p>UPDATE语句<strong>：UPDATE 表名 SET 字段 = 值 WHERE 条件 limit  </strong></p>
<p>DELETE语句<strong>：DELETE  FROM 表名 WHERE 条件 limit  </strong></p>
<p>上面的我就不写例子了，有通项公式可以自己套，另外还可以在phpMyAdmin中自己探索，删除一张表，看看最官方最规范的SQL语句是怎么写的。这样更有利于大家学习。</p>
<h3 id="三、-PHP调用数据库实例及SQL效率、安全"><a href="#三、-PHP调用数据库实例及SQL效率、安全" class="headerlink" title="三、   PHP调用数据库实例及SQL效率、安全"></a>三、   PHP调用数据库实例及SQL效率、安全</h3><p>首先应该知道的就是PHP有哪些关于SQL的函数了，通常链接数据库的文件名都叫做conn.php、或者conn.asp，不过我的建议是最好更换一个名字。应该可以增强点安全性。如果不想增加可以这样设置，假设配置的Apache中允许Web用户访问呢的目录为public_html，然后可以建立和public_html的平级的文件夹lib、etc等。public_html用户存放可以公开给用户看的内容。比如index.html、stytle.css、图片、js等。而像header.php、conn.php、footer.php、function.php、config.php这些无需让用户直接访问的文件应该放到lib文件夹下，因为这样会有更强的安全性。当然调用文件的时候也就需要这样调用request(“../lib/header.php”);PHP本地可以访问硬盘上的任何目录，但是Web用户的权限是由Apache来限定只能访问public_html的。如果修改Apache的权限呢？通常是在Apache的安装目录/conf/httpd.conf这个文件夹，打开之后搜索DocumentRoot就会找到</p>
<p>DocumentRoot “d:/wamp/www/public_html”</p>
<p>&lt;Directory “d:/wamp/www/public_html “&gt;</p>
<pre><code>Options Indexes FollowSymLinks ExecCGI

Order allow,deny

Allow from all

AllowOverride All
</code></pre><p>&lt;/Directory&gt;</p>
<p>我的环境是由wamp这个集成PHP、MySQL、Apache的套件搭建的，所以DocumentRoot的目录为d:/wamp/www/而通过给后面增加public_html用于限制用户访问的时候限制目录为public_html，然后自己编写的PHP文件没有这个限制。你可以在www目录下建立lib、public_html、etc文件夹，用于分开存放，提高安全性。­­­</p>
<p>关于服务器配置安全性就是这些啦，下面详细的讲解一个表单登录的样例代码。实战中来</p>
<figure class="highlight html"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div><div class="line">21</div><div class="line">22</div><div class="line">23</div><div class="line">24</div><div class="line">25</div><div class="line">26</div><div class="line">27</div><div class="line">28</div><div class="line">29</div><div class="line">30</div><div class="line">31</div><div class="line">32</div><div class="line">33</div><div class="line">34</div><div class="line">35</div><div class="line">36</div><div class="line">37</div><div class="line">38</div><div class="line">39</div><div class="line">40</div><div class="line">41</div><div class="line">42</div><div class="line">43</div><div class="line">44</div><div class="line">45</div><div class="line">46</div><div class="line">47</div><div class="line">48</div><div class="line">49</div><div class="line">50</div><div class="line">51</div><div class="line">52</div><div class="line">53</div><div class="line">54</div><div class="line">55</div><div class="line">56</div></pre></td><td class="code"><pre><div class="line">&amp;lt;!doctype html&amp;gt;</div><div class="line">&amp;lt;html lang=&amp;quot;zh_cn&amp;quot;&amp;gt;</div><div class="line">&amp;lt;head&amp;gt;</div><div class="line">	&amp;lt;title&amp;gt;MySQL表单登录样例&amp;lt;/title&amp;gt;</div><div class="line">	&amp;lt;meta charset=&amp;quot;UTF-8&amp;quot; /&amp;gt;</div><div class="line">	&amp;lt;meta name=&amp;quot;author&amp;quot; content=&amp;quot;晓风东东&amp;quot; /&amp;gt;</div><div class="line">	&amp;lt;meta name=&amp;quot;description&amp;quot; content=&amp;quot;欢迎大家去我的晓风博客交流，地址：http://liyaodong.sinaappp.com&amp;quot; /&amp;gt;</div><div class="line">&amp;lt;/head&amp;gt;</div><div class="line">	&amp;lt;body&amp;gt;</div><div class="line">		&amp;lt;section id=&amp;quot;queryform&amp;quot;&amp;gt;</div><div class="line">			&amp;lt;div id=&amp;quot;title&amp;quot;&amp;gt;SQL表单登录样例&amp;lt;/div&amp;gt;</div><div class="line">			&amp;lt;div id=&amp;quot;input_area&amp;quot;&amp;gt;</div><div class="line">				&amp;lt;form method=&amp;quot;POST&amp;quot; name=&amp;quot;myform&amp;quot; &amp;gt;</div><div class="line">					&amp;lt;div class=&amp;quot;username&amp;quot;&amp;gt;用户名：&amp;lt;input type=&amp;quot;text&amp;quot; name=&amp;quot;user&amp;quot; autofocus=&amp;quot;true&amp;quot; maxlength=&amp;quot;20&amp;quot; /&amp;gt;&amp;lt;/div&amp;gt;</div><div class="line">					&amp;lt;div class=&amp;quot;userpass&amp;quot;&amp;gt;密码：&amp;lt;input type=&amp;quot;password&amp;quot; name=&amp;quot;pass&amp;quot; maxlength=&amp;quot;16&amp;quot; /&amp;gt;&amp;lt;/div&amp;gt;</div><div class="line">					&amp;lt;input type=&amp;quot;submit&amp;quot; name=&amp;quot;submit&amp;quot; class=&amp;quot;submitbtn&amp;quot; value=&amp;quot;登录&amp;quot; /&amp;gt;</div><div class="line">				&amp;lt;/form&amp;gt;</div><div class="line">				&amp;lt;?php</div><div class="line">					//start session</div><div class="line">					session_start();</div><div class="line">					//if username and password were submited, check them</div><div class="line">					if (isset($_POST[&amp;quot;user&amp;quot;]) &amp;amp;&amp;amp; isset($_POST[&amp;quot;pass&amp;quot;]))&#123;</div><div class="line">						//connect to datebase</div><div class="line">						if(($connection = mysql_connect(&amp;quot;localhost&amp;quot;,&amp;quot;root&amp;quot;,&amp;quot;&amp;quot;)) === FALSE)</div><div class="line">							die(&amp;quot;Could not connect to datebase&amp;quot;);</div><div class="line">						//select datebase</div><div class="line">						if(mysql_select_db(&amp;quot;webgeek&amp;quot;, $connection) === FALSE)</div><div class="line">							die(&amp;quot;Could not select datebase&amp;quot; . mysql_error());</div><div class="line">						//prepare SQL</div><div class="line">						//AES_ENCRYPT AND AES_DECRYPT</div><div class="line">						$sql = sprintf(&amp;quot;SELECT 1 FROM userinfo WHERE username='%s' AND userpass=AES_ENCRYPT('%s','%s')&amp;quot;,mysql_real_escape_string($_POST[&amp;quot;user&amp;quot;]),mysql_real_escape_string($_POST[&amp;quot;pass&amp;quot;]),mysql_real_escape_string($_POST[&amp;quot;pass&amp;quot;]));</div><div class="line">						//execute query</div><div class="line">						$result = mysql_query($sql);</div><div class="line">						if($result === FALSE)</div><div class="line">							die(&amp;quot;Could not query database&amp;quot;);</div><div class="line">						//check whether we found a row</div><div class="line">						if (mysql_num_rows($result) == 1)&#123;</div><div class="line">							//remeber that user's logged in</div><div class="line">							/*</div><div class="line">							$_SESSION[&amp;quot;authenticated&amp;quot;] = TRUE;</div><div class="line">							//redirect user to  home page, using absolute path. per</div><div class="line">							$host = $_SERVER[&amp;quot;HTTP_HOST&amp;quot;];</div><div class="line">							$path = rtrim(dirname($_SERVER[&amp;quot;PHP_SELF&amp;quot;]),&amp;quot;/\\&amp;quot;);</div><div class="line">							header(&amp;quot;Location: http://$host$path/home.php&amp;quot;);</div><div class="line">							exit;*/</div><div class="line">							echo &amp;quot;登录成功！ welcome you !&amp;quot;;</div><div class="line">						&#125; else &#123;</div><div class="line">							echo &amp;quot;亲，请检查你的账号密码是否正确&amp;quot;;</div><div class="line">						&#125;</div><div class="line">					&#125;?&amp;gt;</div><div class="line">		&amp;lt;div id=&amp;quot;copyright&amp;quot;&amp;gt;</div><div class="line">&amp;lt;a href=&amp;quot;http://liyaodong.sinaapp.com&amp;quot; target=&amp;quot;_blank&amp;quot;&amp;gt;Copy Right 2013 晓风东东 All Right Received .&amp;lt;/a&amp;gt;</div><div class="line">		&amp;lt;/div&amp;gt;</div><div class="line">		&amp;lt;/section&amp;gt;</div><div class="line">	&amp;lt;/body&amp;gt;</div><div class="line">&amp;lt;/html&amp;gt;</div></pre></td></tr></table></figure>
<p>由于没有代码高亮，所以看起来会很吃力。推荐大家到我的博客中去查看，文章链接在最下方。或者将代码复制到你的代码编辑器里，看起来会舒服很多。首先呢，是HTML，HTML没啥说了，主要就是一个表单。</p>
<p>&lt;form method=”POST” name=”myform” &gt;</p>
<pre><code>&amp;lt;div class=&quot;username&quot;&amp;gt;用户名：&amp;lt;input type=&quot;text&quot; name=&quot;user&quot; autofocus=&quot;true&quot; maxlength=&quot;20&quot; /&amp;gt;&amp;lt;/div&amp;gt;

&amp;lt;div class=&quot;userpass&quot;&amp;gt;密码：&amp;lt;input type=&quot;password&quot; name=&quot;pass&quot; maxlength=&quot;16&quot; /&amp;gt;&amp;lt;/div&amp;gt;

&amp;lt;input type=&quot;submit&quot; name=&quot;submit&quot; value=&quot;登录&quot; /&amp;gt;
</code></pre><p>&lt;/form&gt;</p>
<p>一个form最主要的就是method方法，POST和GET这两种具体有什么区别有什么意思请自行百度，毕竟本文主要讲解数据库和SQL。两个输入框，一个登录按钮。HTML、CSS提供了前端表现层的控件。而PHP负责捕捉用户输入并且同数据库校验。那么他们之间必定存在着通讯问题，PHP如何识别HTML的用户输入，PHP如何连接到数据库。HTML表单中的method定义了表单的方法，name定义的表单的名字。input输入框中的name则定义了这个输入框的名字，在PHP捕获用户输入的时候会用到。而提交按钮的type则定义了这个按钮是用来提交表单的。HTML前端控件就是这么多了。再来看看PHP中，比较长</p>
<p>首先是session，session是会话的意思，它的作用就是在Web服务器上保持用户的状态信息供在任何时间任何页访问。因此有了session我们的网站才得以识别谁登陆了谁没有登陆。我们先来开启session会话，至于具体用法待会介绍。</p>
<p>session_start();</p>
<p>开启session会话之后接下来就是对用户提交的表单进行验证了</p>
<p>if (isset($_POST[“user”]) &amp;&amp; isset($_POST[“pass”])){</p>
<p>//connect to datebase</p>
<p>if(($connection = mysql_connect(“localhost”,”root”,””)) === FALSE)</p>
<pre><code>    die(&quot;Could not connect to datebase&quot;);

//select datebase

if(mysql_select_db(&quot;webgeek&quot;, $connection) === FALSE)

    die(&quot;Could not select datebase&quot; . mysql_error());
</code></pre><p>最上面的if判断则是使用isset函数判断是否有超全局变量$_POST[“user”]，如果有则证明了用户提交表单。而超全局变量$_POST[“user”]中的user则是HTML表单input名为user的输入框的值。这就是HTML表单同PHP的通讯方式，使用超全局变量。首先判断有变量了再进行数据库连接，如果用户都没有提交表单，那连接数据库就是一种资源浪费。所以这里使用if判断。</p>
<p>判断用户提交表单之后，进行数据库连接，使用mysql_connect函数与数据库服务器建立连接。</p>
<p>mysql_connect(“数据库服务器”,”数据库用户名”,”数据库密码”)</p>
<p>没有密码就是””，然后还是一个判断，如果条件成立则继续，不成立则输出die函数中的内容。可以看到if条件语句中的判断符号为===而不是==那么这两者有什么却别呢？</p>
<p>在SQL语句中，判断是否相等使用=</p>
<p>在PHP中，判断值是否相等用==通常都可以满足</p>
<p>而PHP中的===则是即判断值是否相等，同时判断类型是否相等。为什么这里要使用===来进行判断？因为if条件中的语句mysql_connnct的返回值，有可能会返回空集。也就是没有SQL查询结果，查询结果为零。没有值不代表语法错误，没有值就是没有值。而使用===判断返回值为FALSE时意味着除过这句话有语法错误，并不是数据库中没有值。如果是FALSE你就要检查一下你的PHP语句是否有语法问题了。</p>
<p>呼~有点绕，是啊，我也觉得有点绕。学过C语言理解这个就能相对轻松一点。比如if语句</p>
<p>if(条件){</p>
<p>   //do something…</p>
<p>//do something…</p>
<p>}</p>
<p>一般情况下if语句是上面那样的，但是如果只有一句就可以写成这样：</p>
<p>if(条件)</p>
<p>   //条件成立时要做的事情</p>
<p>这就是上面中为什么if没有大括号下来直接就是die了。连接到数据库服务器后接下来选择数据库，如果你没有好好看文章开头说的几个概念的区别，有就可能搞混数据库服务器和数据库的概念。数据库服务器指的是MySQL，运行在电脑上一个软件，这个软件里面可以放很多个数据库。你已经连接到数据库服务器了，接下来要选择你要连接到数据库服务器中的哪个数据库。选择数据库使用mysql_select_db函数进行连接。</p>
<p>mysql_select_db(“数据库名”, $connection)</p>
<p>$connection是刚刚连接到的数据库，也就是mysql_connect函数的返回值。经过以上两个步骤，数据库就连接成功了。这也通常是conn.php文件的作用。接下来就是校验密码了。</p>
<p>//prepare SQL</p>
<p>//AES_ENCRYPT AND AES_DECRYPT</p>
<p>$sql = sprintf(“SELECT 1 FROM userinfo WHERE username=’%s’ AND userpass=AES_ENCRYPT(‘%s’,’%s’)”,mysql_real_escape_string($_POST[“user”]),mysql_real_escape_string($_POST[“pass”]),mysql_real_escape_string($_POST[“pass”]));</p>
<p>上面这句话含金量就比较高了，很多情况下这可以区别菜鸟与高手。当然，我是学别人的。拿来主义。</p>
<p>这句话就是将一个SQL语句放入$sql这个变量中，通常这样就可以了：</p>
<p>$sql = “SELECT * FROM <code>userinfo</code> WHERE username=$_POST[user] AND userpass=$_POST[pass]”</p>
<p>userinfo是你存放用户名密码的表，username是用户名字段，也就是存放用户名的列，而userpass是用户密码字段。当这两个字段使用WHERE语句进行搜索的时候两者匹配即可通过验证。这样不是很好吗？很简洁不是吗？当然，菜鸟都会这样觉得，我之前就是。其实不然，这会有一定的效率问题和安全隐患，尤其是SQL注入威胁。首先来说说效率问题：</p>
<p>例子中用的是SELECT 1 FROM…而不是SELECT * FROM…一般情况下我们需要将SQL结果中的所有值返回PHP，来对数据进行操作。但是这里是用户登录验证，我们只需要知道用户输入的账户和密码是否匹配，其他的我们不需要知道，也没有必要放到内存中去。因此这里的SQL语句是SELECT 1 FROM，进行SQL查询后这会返回一个布尔值，0或者1,1就是账户密码匹配。另外一个效率问题就是数据库设置的问题，使用WHERE语句来校验用户名和密码是否相等的时候数据库是这样来进行验证的：首先找到用户输入的用户名，然后再在密码字段中遍历密码，一一与用户名校对是否匹配，如果匹配成功则终止查询。哦！这太愚蠢了，为什么不在遍历到用户名之后直接查找这行中的密码字段是否和用户输入的密码一致呢？这就用到了前面提到的索引，如果你把用户名字段和密码字段设置了联合索引，那么这里效率将会高出很多。如何设置联合索引？看图：</p>
<p><a href="http://liyaodong.qiniudn.com/uploads/2013/02/index.png" target="_blank" rel="external"><img src="http://liyaodong.qiniudn.com/uploads/2013/02/index.png" alt="" title="index"></a></p>
<p>勾选用户名和用户密码前面的单选框后点击右下方的索引，即可进行联合索引。索引成功后在左下角的索引信息区域会看到第三个是username和userpass的联合索引。使用联合索引之后用WHERE语句判断效率会高出很多。</p>
<p>说完了效率来说说安全问题，有点黑客常识的都会知道SQL注入。所谓的SQL注入(SQL Injection)：在web表单中通过插入SQL语句来达到一些目的。比如在输入框内插入;DELETE * FROM userinfo ，天知道会发生什么事情。SQL注入很普遍，我第一次编写的网站后来就被我轻松注入了，是的，轻松注入。用一些注入工具比如啊D，2分钟就得到数据库用户名和密码了。虽然密码是MD5加密后的，但是仍然让我感觉很不爽。因为有一些在线的MD5破解，可以反向解密的。在一定程度上这还是很不安全。所以记住一点：永远不要相信用户的输入。用户不总是你所想象的那样。说了半天和这个语句有什么关系呢？这里用到了一个sprintf函数</p>
<p>sprintf(“SELECT 1 FROM userinfo WHERE username=’%s’ AND userpass=AES_ENCRYPT(‘%s’,’%s’)”,mysql_real_escape_string($_POST[“user”]),mysql_real_escape_string($_POST[“pass”]),mysql_real_escape_string($_POST[“pass”]));</p>
<p>sprintf是否想起了C语言中的printf函数？看到%s的时候是否也想到了C语言中的占位符？是的，就是这个作用，通过使用%s来占位，然后使用mysql_real_escape_string函数对用户输入进行过滤。这在很大程度上能抵挡绝大多数SQL攻击，当然只是绝大多数。没有绝对的事情。</p>
<p>sprintf(“%s”,mysql_real_escape_string($_POST[“pass”]))</p>
<p>这个就是该函数的用法，更多的用法可以参考PHP的手册。除过防范SQL注入攻击之外，密码也要经过处理之后才能放入数据库。例如2012年的CSDN数据库被黑掉，其数据库中明文存储密码，这就是一种很危险的行为。因此数据库中存储密码必须加密存储。具体的操作细节还在这段话中：</p>
<p>userpass=AES_ENCRYPT(‘%s’,’%s’)</p>
<p>可以看到这里有一个AES_ENCRYPT函数，这是一个MySQL的内置加密函数，记住是SQL内的函数，而不是PHP的。因此你可以在SQL语句中使用此函数。AES_ENCRYPT()和AES_DECRYPT() 可以被看作MySQL中普遍通用的密码最安全的加密函数。</p>
<p>AES_ENCRYPT(‘要���密的字符’,’密钥’)</p>
<p>AES_DECRYPT(‘要解密的字符’,’密钥’)</p>
<p>在上文的代码中加密字符为用户输入的密码，同时密钥也是用户输入的密码。因此其安全性大大增加，即使有人进入了你的数据库，看到了用户名和用户密码，但是这是加密的。即便他知道是AES加密算法，不知道密钥，同样没有钥匙，不能打开这把锁。这对于保护用户隐私来说很重要。即使你是网站主，数据库拥有者，使用这样的加密方式你也不知道用户输入的密码是什么。是只是能得到用户加密后的密码。而我们的网站有这样的一串密码就足够了。在用户注册的页面中输入密码时采用AES加密放到数据库中，然后当需要验证登陆时，把输入框中的内容通过AES加密与数据库中的内容进行比对，你完全不需要知道用户输入的是什么。也没有必要知道。有一点必须要说明，如果要使用AES加密算法加密密码字段，那么数据库中密码字段的类型需要是varbinary，长度255就够了。因为AES加密后是二进制类型的，所以需要将密码字段的数据类型改为二进制型。推荐采用varbinary类型。</p>
<p>很多网站采用的加密算法是MD5类型的，对于你要使用AES加密算法还是MD5加密这个取决于你自己。不过我想如果你不是银行之类的，AES就足够你使用了，然而AES和MD5哪个更安全？我想没有最安全的，用穷举哪种加密都可以被破解。当然花费的时间可想而知。</p>
<p>上面啰嗦了很多关于SQL安全和效率问题，不过我觉得啰嗦的这些才是精华。其他的都是菜鸟笔记。接下来看看剩下的验证登陆：</p>
<p>//execute query</p>
<p>$result = mysql_query($sql);</p>
<p>if($result === FALSE)</p>
<pre><code>die(&quot;Could not query database&quot;);
</code></pre><p>//check whether we found a row</p>
<p>if (mysql_num_rows($result) == 1){</p>
<pre><code>//remeber that user&apos;s logged in

/*

$_SESSION[&quot;authenticated&quot;] = TRUE;

//redirect user to  home page, using absolute path. per

//http://us2.php.net/manual/en/function.header.php

$host = $_SERVER[&quot;HTTP_HOST&quot;];
</code></pre><p>$path = rtrim(dirname($_SERVER[“PHP_SELF”]),”/\“);</p>
<pre><code>header(&quot;Location: http://$host$path/home.php&quot;);

exit;*/

echo &quot;登录成功！ welcome you !&quot;;

} else {

echo &quot;亲，请检查你的账号密码是否正确&quot;;
</code></pre><p>}</p>
<p>链接数据库，将SQL语句放入$sql变量之后，接下来使用mysql_query()进行SQL语句的执行，执行结果返回$result，使用mysql_num_rows($result)来检验SQL语句执行后是否有结果返回，如果有结果返回证明用户名和密码是正确的。然后接下来的事情就是引导用户跳转到登录成功之后的界面了。这里将其注释掉了，因为样例页面只有一个登录页面。登录成功后会输出登录成功，如果登录失败则输出账号密码错误。需要注意的是注释后的语句：</p>
<p>$_SESSION[“authenticated”] = TRUE;</p>
<pre><code>//redirect user to  home page, using absolute path. per

$host = $_SERVER[&quot;HTTP_HOST&quot;];
</code></pre><p>$path = rtrim(dirname($_SERVER[“PHP_SELF”]),”/\“);</p>
<pre><code>header(&quot;Location: http://$host$path/home.php&quot;);

exit;
</code></pre><p>设置SESSION中的某个变量为ture，以后的页面通过检查SESSION中的authenticated变量的值即可检验出是否登录。因为SESSION是在服务器端的，所以不需要想Cookies一样对变量名和值进行加密，因为没有SESSION欺骗，只有Cookies欺骗。至于SESSION和Cookies究竟是什么，请自行百度。接着看底下的，通过$_SERVER[“HTTP_HOST”]来获得当前页面的头部信息。$_SERVER 是一个包含诸如头部(headers)、路径(paths)和脚本位置(script locations)的数组。而$_SERVER[“PHP_SELF”]可以获得子目录地址。最后的header则是重定向页面到根目录的home.php文件。一次登录就完成了。在学习过程中肯定会遇到很多的问题，我一般都是先百度，再Google，其实有些问题直接查手册很方便，建议大家下载PHP、MySQL的手册来进行学习，这有利于你更快的走向高手。</p>
<p>刚刚开始初学可能不会知道这些东西，如果当初有人给我写这么一个入门的笔记或者教程，我想我会很快学会这些。不过现在写这些还不晚，毕竟是对自己学过知识的一种巩固。检验自己是否掌握某个知识的方法就是讲给别人听，在这个过程中你会新学习到很多的东西。所以不要吝啬分享，就像快乐的分享一样，一个人的快乐分享给另外一个人，那么快乐就增多了一倍。写了将近一万字的文章后，我也发现自己还有很多需要掌握的知识，Cookies、SESSION、AES加密、PHP的各种超全局变量，效率和硬盘空间的平衡点，安全的代码编写，还有很多需要学习的。文章中难免有错误之处，毕竟只是我的个人笔记，如有错误之处，欢迎给位指出。共同学习，共同进步，入门菜鸟笔记分享，老鸟切勿见笑。最后欢迎大家到我的晓风博客做客，<a href="http://liyaodong.sinaapp.com" target="_blank" rel="external">http://liyaodong.sinaapp.com</a></p>

      
    </div>

    <div class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/科技改变生活/"> #科技改变生活 </a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-prev post-nav-item">
            
              <a href="/2013/03/09/青春，就应该无怨无悔/">青春，就应该无怨无悔</a>
            
          </div>

          <div class="post-nav-next post-nav-item">
            
              <a href="/2013/02/05/基于HTML5-localStorage的便利贴/">基于HTML5 localStorage的便利贴</a>
            
          </div>
        </div>
      

      
      
    </div>
  </div>



    <div class="post-spread">
      
    </div>

    
      <div class="comments" id="comments">
        
          <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          </div>
        
      </div>
    
  </div>


        </div>

        
      </div>


      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      <div class="site-overview"  style="display: block;" >
        <div class="site-author motion-element">
          <img class="site-author-image" src="https://avatars3.githubusercontent.com/u/3196361?v=3&s=460" alt="Vanilla" />
          <p class="site-author-name">Vanilla</p>
        </div>
        <p class="site-description motion-element">晓风博客是一个以技术成长、设计生活、个人心得为主题的个人博客，旨在与你分享生活点滴，共同成长。</p>
        <div class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">169</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">分类</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            
              <span class="site-state-item-count">105</span>
              <span class="site-state-item-name">标签</span>
              
          </div>

        </div>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml">
              <i class="menu-item-icon icon-feed"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
              <a href="https://github.com/liyaodong" target="_blank">github</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="https://twitter.com/xiaofengdong" target="_blank">twitter</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://weibo.com/lyd19941020" target="_blank">weibo</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://www.zhihu.com/people/liyaodong" target="_blank">zhihu</a>
            </span>
            
          
        </div>

        
        
          <div class="cc-license motion-element">
            <a href="http://creativecommons.org/licenses/by-nc-sa/4.0" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            <p class="site-author-name"></p>
            
              <span class="links-of-author-item">
              <a href="http://cloudy9101.github.io/" target="_blank">Cloudy9101</a>
              </span>
            
              <span class="links-of-author-item">
              <a href="http://blog.ligan.me/" target="_blank">Gavin's Blog</a>
              </span>
            
              <span class="links-of-author-item">
              <a href="http://zkuns.github.io/" target="_blank">Zkun's blog</a>
              </span>
            
              <span class="links-of-author-item">
              <a href="http://www.nczonline.net/blog/" target="_blank">NCZOnline</a>
              </span>
            
          
        </div>

      </div>

      

    </div>
  </div>


    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; &nbsp;  2012 - 
  2017
  <span class="with-love">
    <i class="icon-heart"></i>
  </span>
  <span class="author">Vanilla</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT
  </a>
</div>



      </div>
    </div>

    <div class="back-to-top"></div>
  </div>

  
  

  
  <script type="text/javascript" src="/vendors/jquery-pjax/jquery.pjax.js?v=0.4.4"></script>
  <script type="text/javascript" src="/vendors/nprogress/nprogress.js?v=0.4.4"></script>
  <link rel="stylesheet" href="/vendors/nprogress/nprogress.css?v=0.4.4">
  <script type="text/javascript" src="/js/pjax-config.js"></script>


  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.4"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.4"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.4" id="motion.global"></script>



  <script type="text/javascript" src="/js/search-toggle.js"></script>

  
  


  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
    });
  </script>

  

  
  

  

  

    <script type="text/javascript">
      var disqus_shortname = 'xiaofengblog';
      var disqus_identifier = '2013/02/08/数据库及SQL学习笔记总结/';
      var disqus_title = '数据库及SQL学习笔记总结';
      var disqus_url = 'http://liyaodong.com/2013/02/08/数据库及SQL学习笔记总结/';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
        run_disqus_script('embed.js');
      
    </script>
  




  
  
  <script type="text/javascript" src="/js/analytics_google-analytics.js?v=0.4.4"></script>


</body>
</html>
