

<!DOCTYPE html>



<html amp lang="cn-zh" class="no-js">
<head>
    <title>响应式图片解决方案</title>
    <meta charset="utf-8">

    <script async custom-element="amp-accordion" src="https://cdn.ampproject.org/v0/amp-accordion-0.1.js"></script><script async custom-element="amp-ad" src="https://cdn.ampproject.org/v0/amp-ad-0.1.js"></script><script async custom-element="amp-analytics" src="https://cdn.ampproject.org/v0/amp-analytics-0.1.js"></script><script async custom-element="amp-carousel" src="https://cdn.ampproject.org/v0/amp-carousel-0.1.js"></script><script async custom-element="amp-iframe" src="https://cdn.ampproject.org/v0/amp-iframe-0.1.js"></script><script async custom-element="amp-dynamic-css-classes" src="https://cdn.ampproject.org/v0/amp-dynamic-css-classes-0.1.js"></script><script async custom-element="amp-form" src="https://cdn.ampproject.org/v0/amp-form-0.1.js"></script><script async custom-element="amp-fx-flying-carpet" src="https://cdn.ampproject.org/v0/amp-fx-flying-carpet-0.1.js"></script><script async custom-element="amp-image-lightbox" src="https://cdn.ampproject.org/v0/amp-image-lightbox-0.1.js"></script><script async custom-element="amp-lightbox" src="https://cdn.ampproject.org/v0/amp-lightbox-0.1.js"></script><script async custom-element="amp-sidebar" src="https://cdn.ampproject.org/v0/amp-sidebar-0.1.js"></script><script async custom-element="amp-social-share" src="https://cdn.ampproject.org/v0/amp-social-share-0.1.js"></script><script async custom-element="amp-sticky-ad" src="https://cdn.ampproject.org/v0/amp-sticky-ad-1.0.js"></script><script async custom-element="amp-user-notification" src="https://cdn.ampproject.org/v0/amp-user-notification-0.1.js"></script><script async custom-element="amp-install-serviceworker" src="https://cdn.ampproject.org/v0/amp-install-serviceworker-0.1.js"></script>

    <script async src="https://cdn.ampproject.org/v0.js"></script>

    




    <link rel="canonical" href="https://blog.liyaodong.com/posts/responsive-image-workflow/">

    <link rel="icon" href="/favicon.png" type="image/png" sizes="144x144">

    <meta name="viewport" content="width=device-width, initial-scale=1, minimum-scale=1">

    

    <meta name="theme-color" content="#112233" />
    <meta name="msvalidate.01" content="3C6C979DB103D784162934B1AC452B4B" />

    
<script type="application/ld+json">
{
    "@context": "http://schema.org",
    "@type": "WebSite",
    "name": "晓风博客",
    "alternateName": "Xiaofeng Blog",
    "url": "https://blog.liyaodong.com"
}
</script>
<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "Organization",
  "name": "",
  "url": "https://blog.liyaodong.com"
  , "sameAs": [https://www.facebook.com/lydxfdd https://www.instagram.com/vvvvanilla https://www.linkedin.com/in/yaodong-li-8223a385/ https://twitter.com/xiaofengdong]
  
  
  
}
</script>


























<script type="application/ld+json">
{
  "@context": "http://schema.org",
  "@type": "BreadcrumbList",
  "itemListElement": [{
        "@type": "ListItem",
        "position": 1,
        "item": {
          "@id": "https://blog.liyaodong.com",
          "name": "home"
        }
    },{
        "@type": "ListItem",
        "position": 3,
        "item": {
          "@id": "https://blog.liyaodong.com/posts/",
          "name": "posts"
        }
    },{
        "@type": "ListItem",
        "position": 4,
        "item": {
          "@id": "https://blog.liyaodong.com/posts/responsive-image-workflow/",
          "name": "responsive-image-workflow"
        }
    }]
}
</script>





    <style amp-boilerplate>body{-webkit-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-moz-animation:-amp-start 8s steps(1,end) 0s 1 normal both;-ms-animation:-amp-start 8s steps(1,end) 0s 1 normal both;animation:-amp-start 8s steps(1,end) 0s 1 normal both}@-webkit-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-moz-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-ms-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@-o-keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}@keyframes -amp-start{from{visibility:hidden}to{visibility:visible}}</style><noscript><style amp-boilerplate>body{-webkit-animation:none;-moz-animation:none;-ms-animation:none;animation:none}</style></noscript>
    <style amp-custom>
        .chroma{background-color:#eeeedd}.chroma .err{color:#a61717;background-color:#e3d2d2}.chroma .lntd{vertical-align:top;padding:0;margin:0;border:0}.chroma .lntable{border-spacing:0;padding:0;margin:0;border:0;width:auto;overflow:auto;display:block}.chroma .hl{display:block;width:100%;background-color:#ffffcc}.chroma .lnt{margin-right:0.4em;padding:0 0.4em 0 0.4em}.chroma .ln{margin-right:0.4em;padding:0 0.4em 0 0.4em}.chroma .k{color:#8b008b;font-weight:bold}.chroma .kc{color:#8b008b;font-weight:bold}.chroma .kd{color:#8b008b;font-weight:bold}.chroma .kn{color:#8b008b;font-weight:bold}.chroma .kp{color:#8b008b;font-weight:bold}.chroma .kr{color:#8b008b;font-weight:bold}.chroma .kt{color:#00688b;font-weight:bold}.chroma .na{color:#658b00}.chroma .nb{color:#658b00}.chroma .nc{color:#008b45;font-weight:bold}.chroma .no{color:#00688b}.chroma .nd{color:#707a7c}.chroma .ne{color:#008b45;font-weight:bold}.chroma .nf{color:#008b45}.chroma .nn{color:#008b45;text-decoration:underline}.chroma .nt{color:#8b008b;font-weight:bold}.chroma .nv{color:#00688b}.chroma .s{color:#cd5555}.chroma .sa{color:#cd5555}.chroma .sb{color:#cd5555}.chroma .sc{color:#cd5555}.chroma .dl{color:#cd5555}.chroma .sd{color:#cd5555}.chroma .s2{color:#cd5555}.chroma .se{color:#cd5555}.chroma .sh{color:#1c7e71;font-style:italic}.chroma .si{color:#cd5555}.chroma .sx{color:#cb6c20}.chroma .sr{color:#1c7e71}.chroma .s1{color:#cd5555}.chroma .ss{color:#cd5555}.chroma .m{color:#b452cd}.chroma .mb{color:#b452cd}.chroma .mf{color:#b452cd}.chroma .mh{color:#b452cd}.chroma .mi{color:#b452cd}.chroma .il{color:#b452cd}.chroma .mo{color:#b452cd}.chroma .ow{color:#8b008b}.chroma .c{color:#228b22}.chroma .ch{color:#228b22}.chroma .cm{color:#228b22}.chroma .c1{color:#228b22}.chroma .cs{color:#8b008b;font-weight:bold}.chroma .cp{color:#1e889b}.chroma .cpf{color:#1e889b}.chroma .gd{color:#aa0000}.chroma .ge{font-style:italic}.chroma .gr{color:#aa0000}.chroma .gh{color:#000080;font-weight:bold}.chroma .gi{color:#00aa00}.chroma .go{color:#888888}.chroma .gp{color:#555555}.chroma .gs{font-weight:bold}.chroma .gu{color:#800080;font-weight:bold}.chroma .gt{color:#aa0000}.chroma .gl{text-decoration:underline}.chroma .w{color:#bbbbbb}body{background-color:#f9f8f0;color:#222;font-family:"Avenir Next", "Segoe UI", "Helvetica Neue", Arial, "PingFang SC", "Heiti SC", "Microsoft YaHei UI", "Microsoft YaHei", "Source Han Sans", sans-serif}.tac{text-align:center}a{color:#222;text-decoration:none}.container{max-width:960px;margin-left:auto;margin-right:auto;padding:15px}.container img,.container amp-img{max-width:100%}.site-header{text-align:center;margin-top:40px;font-family:"Songti SC"}.site-title{margin:0;display:inline-block;vertical-align:middle}.site-subtitle{margin:5px;font-size:14px}.site-header--float{font-family:"Songti SC";padding:15px 30px;background:#fff;border-bottom:1px solid #dcdcdc}.site-header--float a{display:flex;align-items:center}.site-title--float{font-size:20px;margin:0px;margin-right:20px}.site-subtitle--float{font-size:12px;margin:0px}.site-footer{padding:10px;margin:20px;text-align:center}.article-item-title{font-size:24px;font-weight:bold;display:inline-block;vertical-align:middle;font-family:"Songti SC";margin:0}.article-item-title:hover{text-decoration:underline}.article-item-date{font-size:12px;display:block;color:#555}.article-item-summary{margin-top:20px;color:#555}.article-item-link{color:#222;text-decoration:none;margin:30px 0 5px}.article-item{max-width:700px;padding-bottom:40px;margin:0 auto 40px auto}.article-item:not(:last-of-type){border-bottom:1px solid #efefef}.article-item amp-img{margin-bottom:20px}.post-title{text-align:center;font-family:"Songti SC";font-size:32px;margin-bottom:5px}.single{line-height:1.625;color:#4a4a4a;max-width:700px}.single amp-img{margin:15px auto;text-align:center}.single code{color:#AA8D5B;font-size:14px;font-weight:bold;margin:5px}.single pre>code{font-weight:600;margin:0}.single div.highlight{box-shadow:0 3px 3px 1px #d2c7b5}.single .chroma{background-color:transparent}.single a{text-decoration:underline}.single a:hover{color:#000}.single-content{margin-bottom:20px}.pagination{display:flex;justify-content:center;margin:20px 0;padding:0}.pagination .page-item{list-style-type:none;font-size:16px;margin:0 5px}.pagination .page-item.active{font-weight:bold}

    </style>


</head>

<body>




<header class="site-header--float">
    <a href="https://blog.liyaodong.com">
        <h1 class="site-title--float">
            晓风博客
        </h1>
        <h2 class="site-subtitle--float">
            一片荒芜的地方
        </h2>
    </a>
</header>


<section class="single container">
    <h1 class="post-title">响应式图片解决方案</h1>
    <div class="tac">
        <time>2015年10月18日</time>
    </div>

    <article class="single-content">
        <p>

<amp-img
    src="https://image.liyaodong.com/uploads/2015/1018/car.jpg"
    alt="响应式图片 "
    
    
    
    
    
    width="1440"
    height="677"
    layout="responsive"
    on="tap: 314 "
    role="button"
    tabindex="0"
>
</amp-img>

<amp-image-lightbox
    id="314"
    layout="nodisplay"
>
</amp-image-lightbox>

如今开发一个网站不是响应式都不好意思拿出来，那么作为响应式中的重要一环「响应式图片」你又是如何解决的呢？</p>

<p><a href="http://httparchive.org/interesting.php?a=All&amp;l=Oct%201%202015">网站的平均加载已经到了近 2MB</a> 并在不断地增加中，其中图片占据了绝大多数流量(63%)。可以肯定的是网页已经有了严重的大小问题，而图片就是罪魁祸首。虽然已经有很多种 <a href="http://csswizardry.com/2013/01/front-end-performance-for-web-designers-and-front-end-developers/">措施</a> 可以减少网页加载量，但或许更重要的步骤之一是确保响应式图片的加载方案。通过利用响应式图片解决方案，我们可以确保最佳的图片被加载，<a href="http://blog.cloudfour.com/css-media-query-for-mobile-is-fools-gold/">带宽不会被过大的图片所浪费</a>。因此 <a href="https://html.spec.whatwg.org/multipage/embedded-content.html#embedded-content">W3C 定义了 picture 标签</a>：基于检测客户端设备类型的可替换图片方案。具体是由 <code>picture</code> 这个标签去实现，也就是说我们现在有了一个基于标准的响应式图片解决方案可以用在实践中。</p>

<h3 id="长话短说-人话">长话短说（人话）</h3>

<ul>
<li>断点（breakpoints）应该 <a href="http://bradfrost.com/blog/post/7-habits-of-highly-effective-media-queries/#content">取决于内容</a> 而不是设备宽度 （CSS3 media query）</li>
<li>根据尺寸加载不同图片</li>
<li>计算图片像素密度并加到图片加载列表中</li>
<li>通过消除图片加载列表中太相近的值来让加载列表变得可维护</li>
<li>利用程序自动输出图片的不同大小</li>
<li>利用 <code>img</code> 标签的 <code>srcset</code> <code>sizes</code> 等属性输出同一张图片的不同路径/尺寸，以解决响应式图片的大小和像素密度的问题</li>
<li><a href="http://scottjehl.github.io/picturefill/">Picturefill</a> 库能让我们现在就使用这些强大的特性</li>
<li>虽然 <a href="https://www.filamentgroup.com/lab/to-picturefill.html">Picturefill 还有一些缺点</a> 但这么做仍然利大于弊</li>
</ul>

<h3 id="定义">定义</h3>

<p>第一步就是定义所有响应式图片的尺寸和断点，这些信息在网页原型中就应该被精确的标示出来。重要的一点是 <a href="http://bradfrost.com/blog/post/7-habits-of-highly-effective-media-queries/#content">你的断点应该取决于你的内容</a> 而不是不同设备的宽度。这么做是因为设备的参数是在不断变化的，流行的设备尺寸总是在变。通过让内容来决定断点位置，这将确保我们的界面在所有屏幕上响应而不是特殊的几个设备。</p>

<blockquote>
<p><strong>注意</strong> 当决定哪些图片应该被做成响应式时，要记住一点，大多数都是放在内容中的图片。例如在 <code>HTML</code> 中插入的图片而不是在 <code>CSS</code> 中的背景图片。</p>
</blockquote>

<h4 id="图片尺寸">图片尺寸</h4>

<p>首先将你的浏览器窗口放到最大（或者你规定的内容展示最大宽度），然后记录下此时你的内容宽度和你想要展示的图片宽度，通过浏览器的开发者工具或者类似的插件。</p>

<p>接下来缩放你的浏览器窗口直到你想要给图片设置宽度的下一个断点，再继续缩放直到你记录下所有的作用于图片宽度断点。当你完成的时候你应该记录下每张图片在不同大小下应该载入的宽度。</p>

<p>举例，仅仅是例子：</p>

<ul>
<li>[max-width] : [1440]</li>
<li>[breakpoint large] : [1120]</li>
<li>[breakpoint medium] : [800]</li>
<li>[reakpoint small] : [400]</li>
</ul>

<blockquote>
<p><strong>注意</strong> 关于决定断点需要注意的是：断点越多，代码越难维护。除此之外大量的断点会使 CSS 变得臃肿。所以尽量在保证效果的情况下保持最少的断点。</p>
</blockquote>

<h4 id="高分辨率">高分辨率</h4>

<p>下一步是根据你想要支持的分辨率 <a href="http://www.html5rocks.com/en/mobile/high-dpi/">对图片宽度进行计算</a>。决定要支持那些分辨率是很困难的，因为有 <a href="http://screensiz.es/phone">太多的不同的分辨率</a>，并且每支持一种分辨率你需要计算宽度并放在你的图片加载列表里。所以需要做的是根据实际情况和你的用户群体去选择支持不同的分辨率。</p>

<p>如果你已经决定了需要支持那些高分辨率，那图片加载列表会像下面这样：</p>

<ul>
<li>[max-width] : [image width], [image width x1.5], [image width x2]</li>
<li>[breakpoint large] : [image width], [image width x1.5], [image width x2]</li>
<li>[breakpoint medium] : [image width], [image width x1.5], [image width x2]</li>
<li>[breakpoint small] : [image width], [image width x1.5], [image width x2]</li>
</ul>

<h4 id="整合">整合</h4>

<p>如你所见，我们的图片列表数量会随着支持不同的分辨率和断点而变长。通过改变整合列表项让列表更清晰可控是很有必要的。例如任何相近或者不超过 200 像素差距的值。将几个相近的值整合为一个值将有助于构建更清晰的列表：</p>

<ul>
<li>(min-width:1280px) : 1040px, <del>1560px</del>, 2080px</li>
<li>(min-width:1120px) : <del>924px</del>, 1386px, 1848px</li>
<li>(min-width:800px) : 800px, <del>1200px</del>, 1600px</li>
<li>(min-width:400px) : 400px, 600px, <del>800px</del></li>
</ul>

<blockquote>
<p><strong>注意</strong> 这里用像素来做断点值只是为了好对应图片宽度，实际上你的 <a href="http://bradfrost.com/blog/post/7-habits-of-highly-effective-media-queries/#relative">断点应该使用相对单位</a>（em/rem not px）</p>
</blockquote>

<h3 id="输出">输出</h3>

<p>现在我们有了一个慎重考虑的图片宽度列表，下一步则要将每个图片导出为以「断点名」+「<a href="http://sebastien-gabriel.com/designers-guide-to-dpi/#multiplier">像素密度倍数</a>」为名的文件。例如我将最大的断点称为 &ldquo;large&rdquo; 并且图片像素密度倍数为两倍，那么我的文件名则为 &lsquo;image_large@2x.jpg&rsquo;。我倾向于在 Photoshop 中保存图片为 70% 压缩，因为 70% 压缩能确保达到最优的图片大小并且不会损失过多的清晰度（这取决于不同图片，目的是在保证清晰度的情况下尽量减小文件大小）。如果你倾向于保存为 JPEG 格式，那确保通过勾选 <a href="http://calendar.perfplanet.com/2012/progressive-jpegs-a-new-best-practice/">progressive(渐进)</a> 来让图片从模糊到清晰的加载效果。</p>

<blockquote>
<p><strong>译者注</strong> PS/AI 中保存图片请使用「存储为 web 格式/save for web」，快捷键 ctrl/command + shift + alt + s。PNG 格式请勾选 交错/interlaced，JPEG 格式请勾选 渐进/progressive。</p>
</blockquote>

<h4 id="脚本">脚本</h4>

<p>通过提前写好动作脚本（宏）可以让你批量自动化导出你想要的图片大小。根据你选择的设计软件，自动化的脚本可以很容易的设置使用。不幸的是你仍然需要手动重命名每张图片为 &lsquo;xxx_large@2x.png&rsquo; 这样的命名格式。如果你使用 Photoshop 这里有一个 <a href="http://www.creativebloq.com/adobe/create-own-photoshop-actions-61411918">指南</a> 可以帮助你编写你自己的脚本批处理。或者你也可以用这个 <a href="https://github.com/bjango/Bjango-Actions">写好的 PS 脚本</a>。</p>

<h4 id="构建工具">构建工具</h4>

<p>另外一个自动化导出图片的方法是使用构建工具，我选择使用 <a href="http://gulpjs.com/">Gulp</a>。Gulp 是一个基于 Javascript 流式思想的构建工具，这使得构建复杂任务的编写更加简单。这里有各种任务插件，包括<a href="https://www.npmjs.com/package/gulp-image-resize">调整图片大小</a>、<a href="https://www.npmjs.com/package/gulp-rename">文件重命名</a>。只需要编写小段配置，你就可以完全自动化工作流中的某些部分，并且在使用的时候你无须再考虑。使用构建工具的另一个好处是你可以将你的任务链式的串联起来并且可调整顺序。</p>

<h4 id="优化">优化</h4>

<p>最后，你需要注意的是在将你的图片放进网页前进行优化。这将确保图片数据多余的数据被删除，将有效的减小文件的大小。和处理图片或缩放图片一样，有很多种方法可以完成这个任务：你可以使用软件或者终端命令手动优化图片，或者你也可以使用构建工具自动完成这项任务。我喜欢的 JPGs 图片压缩软件是 <a href="https://imageoptim.com/">imageOptim</a> PNG 是 <a href="http://pngmini.com/">imageAlpha</a>，还有一大堆软件你可以选择。</p>

<p>另外你也可以使用强大的构建工具，好处你不需要记得压缩图片，你只需要在你的每个项目里区配置工具即可。我选择用 Gulp 的插件 (imagemin)[<a href="https://www.npmjs.com/package/gulp-imagemin">https://www.npmjs.com/package/gulp-imagemin</a>] 来做这件事情，它也能压缩 SVG 和 GIF 文件。</p>

<h3 id="实现">实现</h3>

<p>最终的步骤是在网页中实现响应式图片。这种方法即所谓的 <a href="https://usecases.responsiveimages.org/#resolution-based-selection">分辨率切换</a>，因为我们只是切换了同一张图片在不同尺寸和分辨率下的源文件地址，以达到在不同的尺寸和像素密度下达到响应的目的。所以我们会使用 picture 标准的一部分 <a href="https://html.spec.whatwg.org/multipage/embedded-content.html#attr-picture-source-srcset">srcset</a> 和 <a href="https://html.spec.whatwg.org/multipage/embedded-content.html#attr-picture-source-sizes">sizes</a> 属性。这些属性继承了 <code>&lt;img&gt;</code> <code>&lt;source&gt;</code> 标签，提供了一个可供浏览器选择最佳图片的图片地址列表。我们实际上提供给浏览器的是我们所知道的信息，而具体会加载那个源则是未知的。这取决于用户设备的带宽、像素密度等。</p>

<h4 id="srcset-属性">srcset 属性</h4>

<p>让我们从 <code>srcset</code> 属性开始，首先我们会提供一个 <code>src</code> 属性给那些不支持 <code>srcset</code> 属性的浏览器。中等大小和分辨率就足够了（不支持 srcset 属性的浏览器用户电脑的尺寸和分辨率也不会大）。接下来通过 <code>srcset</code> 指定给 <code>&lt;img&gt;</code> 标签所有图片源的信息。然后使用逗号分隔列出一个从小到大的图片源列表。每个图片源后可以跟<code>w</code>描述符或者<code>x</code>描述符。最后的结果看起来像是这样：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;image_medium.jpg&#34;</span>
<span class="na">srcset</span><span class="o">=</span><span class="s">&#34;image_small.jpg 400w, image_small@1.5x.jpg 600w, image_medium.jpg 800w, image_xlarge.jpg 1040w, image_large@1.5x.jpg 1386w, image_medium@2x.jpg 1600w, image_large@2x.jpg 1848w, image_xlarge@2x.jpg 2080w&#34;</span>
<span class="na">alt</span><span class="o">=</span><span class="s">&#34;Image description&#34;</span> <span class="p">/&gt;</span></code></pre></td></tr></table>
</div>
</div>
<p>现在我们有了一个可供选择源的图片标签，浏览器可以根据选择采用最佳的源，同时我们还有一个回退方案填写在 <code>src</code> 属性中。如果浏览器支持 <code>srcset</code> 则会下载最佳的图像，否则直接下载 <code>src</code> 属性内的图像。因此带宽浪费和页面大小冗余会被降到最低。</p>

<p>需要注意的是 <strong><code>srcset</code> 只是描述了一个 <code>&lt;img&gt;</code> 有哪些可用的源</strong>，后面的 <code>w</code> 描述符并不是说某个宽度下就一定会加载这个源。<strong>具体的情况还是取决于用户的浏览器环境、带宽等</strong> 同时对于同一源，只能标示一个符号<code>w/x</code>，不能同时标记两者，也建议不要在列表中混用 <code>w/x</code>，混用将会导致计算过于复杂。</p>

<h4 id="sizes-属性">sizes 属性</h4>

<p>我们也可以通过设置 <code>sizes</code> 属性来<strong>帮助浏览器选择不同的图片源</strong>，通过 <code>size</code> 属性浏览器知道我们的图片在不同的 viewport 下占了多大，也就是<strong>图片相对于 viewport 的比例</strong>。<code>sizes</code> 属性并不是必填的，没有<code>sizes</code> 属性 <code>srcset</code> 仍然有效。但是如果 <code>srcset</code> 属性没有那么 <code>sizes</code> 属性将不会生效。</p>

<p>如果没有 <code>sizes</code> 属性，那么 <code>srcset</code> 则被认为不论图片占多宽，都始终采用和 viewport 相同宽度的源（排除分辨率的影响）。建议 <code>sizes</code> 应该配合 <code>srcset</code> 一起使用：</p>
<div class="highlight"><div class="chroma">
<table class="lntable"><tr><td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="lnt">1
</span><span class="lnt">2
</span><span class="lnt">3
</span><span class="lnt">4
</span></code></pre></td>
<td class="lntd">
<pre class="chroma"><code class="language-html" data-lang="html"><span class="p">&lt;</span><span class="nt">img</span> <span class="na">src</span><span class="o">=</span><span class="s">&#34;image_medium.jpg&#34;</span>
<span class="na">sizes </span><span class="o">=</span><span class="s">&#34;(min-width:1120px) 924px, (min-width:1280px) 1040px, 100vw&#34;</span>
<span class="na">srcset</span><span class="o">=</span><span class="s">&#34;image_small.jpg 400w, image_small@1.5x.jpg 600w, image_medium.jpg 800w, image_xlarge.jpg 1040w, image_large@1.5x.jpg 1386w, image_medium@2x.jpg 1600w, image_large@2x.jpg 1848w, image_xlarge@2x.jpg 2080w&#34;</span>
<span class="na">alt</span><span class="o">=</span><span class="s">&#34;Image description&#34;</span> <span class="p">/&gt;</span></code></pre></td></tr></table>
</div>
</div>
<p>上面的代码告诉浏览器，在视窗宽度小于 1120px 的时候这个图片要加载 924px 宽度的，在视窗宽度小于 1280px 大于 1120px 的时候要加载 1040px 的图片，视窗大于 1280px 的加载和视窗宽度相同的图片。</p>

<p>浏览器将使用这些属性来进一步为用户选择合适的图片源，你可以选择增加更多的断点和不同宽度下图片的加载列表（但这会显著的增加布局内的信息），或者你也可以保持相对简单。关键是现在浏览器知道了关于图片的更多信息，它将在不同的情况下选择最佳的图片源。</p>

<h4 id="艺术指导-art-direction-use-case">艺术指导（ART-DIRECTION USE CASE）</h4>

<p>大多数情况下 <code>srcset</code> 和 <code>sizes</code> 都已经够用了。但是仍然有时候你需要根据不同的尺寸修改图片的内容。例如使用类似于 <code>srcset</code> 和 <code>sizes</code> 标准的 <code>&lt;picture&gt;</code> 标签。关于 <code>&lt;picture&gt;</code> 的更多信息可以了解 <a href="http://blog.cloudfour.com/dont-use-picture-most-of-the-time/">Jason Grigsby’s article</a> （这篇文章其实说的大多数情况下不要用 picture，个人认为其实不同的图片内容也可依赖 <code>srcset</code>，<code>picture</code> 过于复杂。并且兼容性上 <a href="http://caniuse.com/#search=picture"><code>picture</code></a> 不如 <a href="http://caniuse.com/#search=srcset"><code>srcset</code></a> ）。</p>

<h4 id="浏览器兼容">浏览器兼容</h4>

<p><a href="http://caniuse.com/#feat=srcset"><code>srcset</code> 和 <code>sizes</code>的浏览器兼容性</a> 已经获得了更多的支持，但对于大多数项目你需要更多的考虑兼容。幸运的是 <a href="http://scottjehl.github.io/picturefill/">Picturefill</a> 是一个很棒的支持跨浏览器的兼容库，它支持 <code>&lt;picture&gt;</code> 和 <code>srcset</code> 以及 <code>sizes</code> 特性。这个兼容库允许你使用推荐的 <code>&lt;picture&gt;</code> 语法，因此可以在浏览器兼容性没有问题的时候移除该库。虽然 Picturefill 还有一些缺点，但这么做仍然利大于弊。</p>

<blockquote>
<p><strong>注意</strong> 在使用 picturefill 库的时候，作者推荐抛弃使用 <code>src</code> 标签，因为这将 <a href="https://www.filamentgroup.com/lab/to-picturefill.html">导致图片的重复下载</a>。</p>
</blockquote>

<p>中文资料：</p>

<ul>
<li><a href="https://www.zfanw.com/blog/srcset-and-sizes.html">Srcset 和 sizes（推荐）</a></li>
<li><a href="http://www.zhangxinxu.com/wordpress/2014/10/responsive-images-srcset-size-w-descriptor/">响应式图片srcset全新释义sizes属性w描述符</a></li>
</ul>

<p>更多阅读：</p>

<ul>
<li><a href="http://timkadlec.com/2013/06/why-we-need-responsive-images/">Why We Need Responsive Images</a></li>
<li><a href="http://alistapart.com/article/mo-pixels-mo-problems">Mo’ Pixels Mo’ Problems</a></li>
<li><a href="https://css-tricks.com/responsive-images-youre-just-changing-resolutions-use-srcset/">Responsive Images: If You’re Just Changing Resolutions, Use Srcset</a></li>
<li><a href="http://www.smashingmagazine.com/2013/07/choosing-a-responsive-image-solution/">Choosing a Responsive Image Solution</a></li>
<li><a href="https://responsiveimages.org/">ResponsiveImages.org</a></li>
<li><a href="http://sebastien-gabriel.com/designers-guide-to-dpi/#multiplier">Designers Guide to DPI</a></li>
</ul>

<p>原文链接：<a href="http://jonyablonski.com/2015/responsive-image-workflow/">http://jonyablonski.com/2015/responsive-image-workflow/</a></p>

<blockquote class="blockquote-center">Baskin-Robbins always finds out.
</blockquote>
    </article>

    <amp-iframe width="700" height="163"
                layout="responsive"
                sandbox="allow-scripts allow-same-origin allow-modals allow-popups allow-forms"
                resizable
                src="https://liyaodong.com/disqus.html#responsive-image-workflow.md|https%3a%2f%2fblog.liyaodong.com%2fposts%2fresponsive-image-workflow%2f">
        <div overflow tabindex=0 role=button aria-label=""></div>
    </amp-iframe>
</section>

<footer class="site-footer">
    Powered by <a href="https://www.gnu.org/software/emacs/">Emacs</a> and <a href="https://gohugo.io/">Hugo</a> with &#10084;.
</footer>

<amp-install-serviceworker
    src="https://blog.liyaodong.com/sw.js"
    layout="nodisplay">
</amp-install-serviceworker>



<amp-analytics type="googleanalytics">
    <script type="application/json">
        {
            "vars": {
                "account": "UA-30027709-1"
            },
            "triggers": {"trackPageview":{"on":"visible","request":"pageview"}}
        }
    </script>
</amp-analytics>

</body>
</html>

