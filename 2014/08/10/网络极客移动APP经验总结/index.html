<!doctype html>
<html class="theme-next use-motion ">
<head>
  

<meta charset="UTF-8"/>
<meta http-equiv="X-UA-Compatible" content="IE=edge,chrome=1" />
<meta name="viewport" content="width=device-width, initial-scale=1, maximum-scale=1"/>






  <link rel="stylesheet" type="text/css" href="/vendors/fancybox/source/jquery.fancybox.css?v=2.1.5"/>




<link rel="stylesheet" type="text/css" href="/css/main.css?v=0.4.4"/>


    <meta name="description" content="晓风博客是一个以技术成长、设计生活、个人心得为主题的个人博客，旨在与你分享生活点滴，共同成长。" />



  <meta name="keywords" content="科技改变生活," />



  <link rel="alternate" href="/atom.xml" title="晓风博客" type="application/atom+xml" />



  <link rel="shorticon icon" type="image/x-icon" href="/favicon.ico?v=0.4.4" />


<meta content="晓风博客" property="og:site_name">
<meta content="网络极客移动APP经验总结" property="og:title">
<meta content="http://liyaodong.com/2014/08/10/网络极客移动APP经验总结/" property="og:url">
<meta content="article" property="og:type">
<meta content="晓风博客是一个以技术成长、设计生活、个人心得为主题的个人博客，旨在与你分享生活点滴，共同成长。" property="og:description">



<script type="text/javascript" id="hexo.configuration">
  var CONFIG = {
    scheme: '',
    analytics: {
      google: 'UA-30027709-1'
    },
    sidebar: 'hide'
  };
</script>




  <title> 网络极客移动APP经验总结 // 晓风博客 </title>
  <script type="text/javascript" src="/vendors/jquery/index.js?v=2.1.3"></script>
</head>

<body>
  <!--[if lte IE 8]>
  <div style=' clear: both; height: 59px; padding:0 0 0 15px; position: relative;margin:0 auto;'>
    <a href="http://windows.microsoft.com/en-US/internet-explorer/products/ie/home?ocid=ie6_countdown_bannercode">
      <img src="http://7u2nvr.com1.z0.glb.clouddn.com/picouterie.jpg" border="0" height="42" width="820"
           alt="You are using an outdated browser. For a faster, safer browsing experience, upgrade for free today or use other browser ,like chrome firefox safari."
           style='margin-left:auto;margin-right:auto;display: block;'/>
    </a>
  </div>
<![endif]-->

  <div class="container one-column page-post-detail">
    <div id="header" class="header">
      <div class="header-inner">
        <h1 class="site-meta">
  <span class="logo-line-before"><i></i></span>
  <span class="logo windmill-logo">
    <i class="windmill-top"></i>
    <i class="windmill-dot"></i>
    <i class="windmill-base"></i>
  </span>
  <a href="/" class="brand windmill-hover">
    <span class="site-title">晓风博客</span>
  </a>
  <span class="logo-line-after"><i></i></span>
</h1>

<div class="site-nav-toggle">
  <button>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
    <span class="btn-bar"></span>
  </button>
</div>

<div class="site-nav">
  

  
    <ul id="menu" class="menu ">
      
        
        <li class="menu-item menu-item-home">
          <a href="/">
            <i class="menu-item-icon icon-home"></i> <br />
            首页
          </a>
        </li>
      
        
        <li class="menu-item menu-item-archives">
          <a href="/archives">
            <i class="menu-item-icon icon-archives"></i> <br />
            归档
          </a>
        </li>
      
    </ul>
  

  
</div>

      </div>
    </div>

    <div id="main" class="main">
      <div class="main-inner">
        <div id="content" class="content">
          

  <div id="posts" class="posts-expand">
    

  <div class="post post-type-normal ">
    <div class="post-header">

      
      
        <h1 class="post-title">
          
          
            
              网络极客移动APP经验总结
            
          
        </h1>
      

      <div class="post-meta">
        <span class="post-time">
          发表于 2014-08-10
        </span>

        

        
          
            <span class="post-comments-count">
            &nbsp; | &nbsp;
            <a href="/2014/08/10/网络极客移动APP经验总结/#comments" >
              <span class="post-comments-count disqus-comment-count" data-disqus-identifier="2014/08/10/网络极客移动APP经验总结/"></span>
            </a>
          </span>
          
        
      </div>
    </div>

    <div class="post-body">

      
      

      
        <p><a href="http://liyaodong.qiniudn.com/uploads/2014/08/banner1.jpg" target="_blank" rel="external"><img src="http://liyaodong.qiniudn.com/uploads/2014/08/banner1.jpg" alt="web-app-dev"></a></p>
<p>关于移动App Native和Web方式不在本文讨论范围之内，仅仅是经验总结，巩固知识方便以后查阅。<a id="more"></a></p>
<h3 id="概述"><a href="#概述" class="headerlink" title="概述"></a>概述</h3><p>首先简单说明下该APP的组成：</p>
<blockquote>
<ol>
<li>后端使用PHP和<a href="http://codeigniter.org.cn/" target="_blank" rel="external">Codeigniter</a>框架实现</li>
<li>前端采用<a href="http://goratchet.com" target="_blank" rel="external">Ratchet</a>框架。</li>
<li>数据抓取主要采用PHP Curl类</li>
<li>DOM分析采用simple_html_dom这个插件</li>
<li>使用SVN作为版本控制系统</li>
<li>使用JSON作为数据交换格式</li>
<li>Zepto.js作为javascript框架</li>
<li>应用地址：<a href="http://geekers.sinaapp.com/mobile/" target="_blank" rel="external">点击进入</a></li>
</ol>
</blockquote>
<p>App功能实际上主要是模拟登陆教务系统，然后对成绩、课表等进行抓取，并按照手机排版格式优化输出。除此之外，还对数据进行收集，做数据的二次挖掘。</p>
<h3 id="心得"><a href="#心得" class="headerlink" title="心得"></a>心得</h3><h5 id="1-关于用户登录"><a href="#1-关于用户登录" class="headerlink" title="1. 关于用户登录"></a>1. 关于用户登录</h5><p>直接模拟到教务系统，对中间数据不做任何保留，防止出现安全问题。所以想测试安全性的同学省省吧，在我这测试和在教务系统直接测试是一样的，没有sql inject。因为评论系统是多说的，所以也不存在XXS了。</p>
<h5 id="2-关于数据库表格设计"><a href="#2-关于数据库表格设计" class="headerlink" title="2. 关于数据库表格设计"></a>2. 关于数据库表格设计</h5><p>这个本身是没有什么好说的，但是本次在设计的时候使用到了JSON。如果一个二维数组想要存储进数据库，可以把某一列数据格式化为JSON后再存储进去，非常方便，PHP需要用的时候再解析出来。不过再要新加数据的话就要全部解析出来，转化成数组再格式化回去，适合没有多少数据量的列。</p>
<h5 id="3-移动端的HTML-meta标记"><a href="#3-移动端的HTML-meta标记" class="headerlink" title="3. 移动端的HTML meta标记"></a>3. 移动端的HTML meta标记</h5><p>第一个当然要说的是屏幕比例，第一行meta可以禁用用户双击放大、所小用户屏幕。我们已经为移动端做了优化，放大缩小功能当然是不需要的。而viewport则是设定了网页最大宽度等于设备的显示宽度。第二个meta表示是否禁止ios safari浏览器的工具栏。第三个则是工具栏的颜色调试。<br><figure class="highlight php"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div></pre></td><td class="code"><pre><div class="line">&amp;lt;head&amp;gt;</div><div class="line">	&amp;lt;div id=<span class="string">'wx_pic'</span> style=<span class="string">'margin:0 auto;display:none;'</span>&amp;gt;</div><div class="line">	    &amp;lt;img src=<span class="string">'&amp;lt;?php echo $images_url;?&amp;gt;/icon.jpg'</span> /&amp;gt;</div><div class="line">	&amp;lt;/div&amp;gt;</div><div class="line">&amp;lt;/head&amp;gt;</div></pre></td></tr></table></figure></p>
<h5 id="4-移动端框架选择："><a href="#4-移动端框架选择：" class="headerlink" title="4. 移动端框架选择："></a>4. 移动端框架选择：</h5><p>最初尝试了jQuery Mobile，这款框架功能很丰富，尤其是Ajax方面做的很好。但是性能着实堪忧，在Android的低端手机上反应很慢，有时候进一个网页需要30s + 。这当然是无法忍受的，所以又尝试了很多发现Ratchet不错，这个框架是twitter公司开发出的bootstrap“移动版”。这一点令我很纳闷，bootstrap 3.0本身就是移动优先的，那为何又有一个Ratchet？不过使用之后发现这款框架仍然不够成熟，而且用的人也比较少。后来我甚至去掉了框架里的JS，只是使用了布局和图标。</p>
<h5 id="5-性能优化："><a href="#5-性能优化：" class="headerlink" title="5. 性能优化："></a>5. 性能优化：</h5><p>性能是移动端的瓶颈之一，如果不是引入了jiathis分享和多说评论，我对性能还是很满意的。从测试来看访问速度都很快，毕竟做了很多优化。不过还好，jiathis和多说都是ajax加载的，不会影响太多。说道优化必须说的就是图片优化，这个项目中首先采用了服务器端的gzip优化，将静态资源CSS、JS、图片等在服务器端压缩，然后浏览器会自动解压，节省传输中的带宽。其次对有所有的图片进行了压缩。因为采用了前端构建工具Grunt，所以很方便。Grunt会自动编译Less、压缩所有CSS到style.min.css、压缩所有JS、压缩所有图片。在Google的PageSpeed评分中各项指标都达到了L，只有一项是M。没有H。<br>其实总结来说网页的优化就是：</p>
<blockquote>
<p>1.减少不必要使用的JS、CSS。</p>
<p>  2.压缩图片。</p>
<p>  3.使用字体图标，试过SVG貌似兼容不太好。</p>
<p>  4.使用Ajax来加载一些东西，比如外部的JS、校验密码等。</p>
<p>  6. 数据交换和存储，页面见传递数据采用JSON这种很方便的格式化之后的数据，这比数组和对象更容易在数据库、后端、前端之间中互相交换。非常方便！</p>
<p>  7. SEO优化、分享时的标题文字和图片优化。每个页面单独有SEO Title和Description，通过单独设计这些文字，页面被分享的时候才会更加吸引人。如果有必要可以借鉴微信朋友圈很火的游戏“围住神经猫”在分享中带上自己的得分等，引起社交攀比，有利于应用推广。同时附上微信分享中的图片设置代码：</p>
<pre><code class="php">
&amp;lt;div id=&amp;quot;wx_pic&amp;quot; style=&amp;quot;margin: <span class="number">0</span> auto; display: none;&amp;quot;&amp;gt;&amp;lt;img src=&amp;quot;&amp;lt;?php <span class="keyword">echo</span> $images_url;?&amp;gt;/icon.jpg&amp;quot;/&amp;gt;&amp;lt;/div&amp;gt;
</code></pre>
<p>  对的，你没看错，是在head标签中加入<code>div#wx_pic</code>我也很郁闷这不是破坏了HTML结构么，但是微信就是这么二。</p>
</blockquote>
<h5 id="8-关于移动端的布局"><a href="#8-关于移动端的布局" class="headerlink" title="8. 关于移动端的布局"></a>8. 关于移动端的布局</h5><p>移动端浏览器对<code>position:fixed</code>支持不是很好，想要尝试固定你的标题栏导航栏之类的可以试试iscroll这个JS框架。除此之外对全局使用<code>position:absolute</code>然后所以页面包含在这个标签内也会有问题，测试发现当网页需要想下翻动时由于浏览器的工具栏有时会隐藏，此种方式会造成<code>position:absolute</code>的判定不准。从形式上来看就会感觉网页有卡顿。所以不再非不得已的情况下不要我觉得还是不要使用<code>absolute</code>和<code>fixed</code>的比较好。</p>
<h5 id="9-关于移动端的Event事件"><a href="#9-关于移动端的Event事件" class="headerlink" title="9. 关于移动端的Event事件"></a>9. 关于移动端的Event事件</h5><p>移动端的不叫click事件。而且当你使用jQuery的<code>click function</code>的时候会发现有迟钝甚至没反应。因为在移动端的点击事件叫做<code>tap</code>事件，双击<code>double tap</code>等等。推荐在移动端使用Zepto.js作为替代jQuery的选择，用法几乎和jQuery一样，所以不存在学习成本。</p>
<h5 id="10-input标签的tabindex、autofocus、placeholder"><a href="#10-input标签的tabindex、autofocus、placeholder" class="headerlink" title="10. input标签的tabindex、autofocus、placeholder"></a>10. input标签的tabindex、autofocus、placeholder</h5><p>各个标签的意义就不用解释了，不懂的请自行百度。只是这次新认识一个tabindex表示tab切换的标签，以及一个小的技巧就是隐藏的submit标签，用来enter提交表单。不需要去做事件监听，性能应该好点。只需要在JS端检测submit事件即可。<br><figure class="highlight"><table><tr><td class="gutter"><pre><div class="line">1</div><div class="line">2</div><div class="line">3</div><div class="line">4</div><div class="line">5</div><div class="line">6</div><div class="line">7</div><div class="line">8</div><div class="line">9</div><div class="line">10</div><div class="line">11</div><div class="line">12</div><div class="line">13</div><div class="line">14</div><div class="line">15</div><div class="line">16</div><div class="line">17</div><div class="line">18</div><div class="line">19</div><div class="line">20</div></pre></td><td class="code"><pre><div class="line">&amp;lt;form class=&amp;quot;input-group bind_form&amp;quot; id=&amp;quot;jwweb&amp;quot; name=&amp;quot;jwweb&amp;quot; onsubmit=&amp;quot;return false&amp;quot; action=&amp;quot;xxx&amp;quot;&amp;gt;</div><div class="line">    &amp;lt;div class=&amp;quot;input-row&amp;quot;&amp;gt;</div><div class="line">        &amp;lt;label for=&amp;quot;xh&amp;quot;&amp;gt;学号：&amp;lt;/label&amp;gt;</div><div class="line">        &amp;lt;input type=&amp;quot;number&amp;quot; placeholder=&amp;quot;201193014000&amp;quot; name=&amp;quot;xh&amp;quot; autofocus=&amp;quot;autofocus&amp;quot; tabindex=&amp;quot;1&amp;quot;&amp;gt;</div><div class="line">    &amp;lt;/div&amp;gt;</div><div class="line">    &amp;lt;div class=&amp;quot;input-row&amp;quot;&amp;gt;</div><div class="line">        &amp;lt;label for=&amp;quot;password&amp;quot;&amp;gt;密码：&amp;lt;/label&amp;gt;</div><div class="line">        &amp;lt;input type=&amp;quot;password&amp;quot; placeholder=&amp;quot;password&amp;quot; name=&amp;quot;password&amp;quot; tabindex=&amp;quot;2&amp;quot;&amp;gt;</div><div class="line">    &amp;lt;/div&amp;gt;</div><div class="line">    &amp;lt;div class=&amp;quot;input-row&amp;quot;&amp;gt;</div><div class="line">        &amp;lt;label&amp;gt;验证码：&amp;lt;/label&amp;gt;</div><div class="line">        &amp;lt;a href=&amp;quot;javascript:void(0)&amp;quot; id=&amp;quot;reloadcode&amp;quot;&amp;gt;&amp;lt;img id=&amp;quot;codeimg&amp;quot; src=&amp;quot;&amp;lt;?php echo base_url(&amp;quot;jwweb/getvalidcode&amp;quot;);?&amp;gt;&amp;quot; style=&amp;quot;</div><div class="line">        margin-top: 4px;&amp;quot;&amp;gt;&amp;lt;/a&amp;gt;</div><div class="line">    &amp;lt;/div&amp;gt;</div><div class="line">    &amp;lt;div class=&amp;quot;input-row&amp;quot;&amp;gt;</div><div class="line">        &amp;lt;label for=&amp;quot;cCode&amp;quot;&amp;gt;请输入：&amp;lt;/label&amp;gt;</div><div class="line">        &amp;lt;input type=&amp;quot;text&amp;quot; size=&amp;quot;4&amp;quot; placeholder=&amp;quot;abcd&amp;quot; name=&amp;quot;cCode&amp;quot; tabindex=&amp;quot;3&amp;quot;&amp;gt;</div><div class="line">    &amp;lt;/div&amp;gt;</div><div class="line">    &amp;lt;input type=&amp;quot;submit&amp;quot; style=&amp;quot;display:none&amp;quot; /&amp;gt;</div><div class="line">&amp;lt;/form&amp;gt;</div></pre></td></tr></table></figure></p>
<p>暂时能想到的就是这么多了，这个项目做完后准备学习一下<code>Node</code>和<code>Angularjs</code>，备战十月份的找工作，如果有哪个公司要招前端的烦劳联系我一下。大四准毕业生，有三年web开发经验，准备在北京找全职工作。会设计、懂代码、前后端通吃。邮箱：mail@liyaodong.com 还有两个月，好好加油！</p>

      
    </div>

    <div class="post-footer">
      
        <div class="post-tags">
          
            <a href="/tags/科技改变生活/"> #科技改变生活 </a>
          
        </div>
      

      
        <div class="post-nav">
          <div class="post-nav-prev post-nav-item">
            
              <a href="/2014/08/11/每一天都是生命中最独特的/">每一天都是生命中最独特的</a>
            
          </div>

          <div class="post-nav-next post-nav-item">
            
              <a href="/2014/08/04/响应式小清新主题“晓风”/">响应式小清新主题“晓风”</a>
            
          </div>
        </div>
      

      
      
    </div>
  </div>



    <div class="post-spread">
      
    </div>

    
      <div class="comments" id="comments">
        
          <div id="disqus_thread">
            <noscript>Please enable JavaScript to view the <a href="//disqus.com/?ref_noscript">comments powered by Disqus.</a></noscript>
          </div>
        
      </div>
    
  </div>


        </div>

        
      </div>


      
  
  <div class="sidebar-toggle">
    <div class="sidebar-toggle-line-wrap">
      <span class="sidebar-toggle-line sidebar-toggle-line-first"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-middle"></span>
      <span class="sidebar-toggle-line sidebar-toggle-line-last"></span>
    </div>
  </div>

  <div id="sidebar" class="sidebar">
    <div class="sidebar-inner">

      

      <div class="site-overview"  style="display: block;" >
        <div class="site-author motion-element">
          <img class="site-author-image" src="https://avatars3.githubusercontent.com/u/3196361?v=3&s=460" alt="Vanilla" />
          <p class="site-author-name">Vanilla</p>
        </div>
        <p class="site-description motion-element">晓风博客是一个以技术成长、设计生活、个人心得为主题的个人博客，旨在与你分享生活点滴，共同成长。</p>
        <div class="site-state motion-element">
          <div class="site-state-item site-state-posts">
            <a href="/archives">
              <span class="site-state-item-count">169</span>
              <span class="site-state-item-name">日志</span>
            </a>
          </div>

          <div class="site-state-item site-state-categories">
            
              <span class="site-state-item-count">0</span>
              <span class="site-state-item-name">分类</span>
              
          </div>

          <div class="site-state-item site-state-tags">
            
              <span class="site-state-item-count">105</span>
              <span class="site-state-item-name">标签</span>
              
          </div>

        </div>

        
          <div class="feed-link motion-element">
            <a href="/atom.xml">
              <i class="menu-item-icon icon-feed"></i>
              RSS
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            
              <span class="links-of-author-item">
              <a href="https://github.com/liyaodong" target="_blank">github</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="https://twitter.com/xiaofengdong" target="_blank">twitter</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://weibo.com/lyd19941020" target="_blank">weibo</a>
            </span>
            
              <span class="links-of-author-item">
              <a href="http://www.zhihu.com/people/liyaodong" target="_blank">zhihu</a>
            </span>
            
          
        </div>

        
        
          <div class="cc-license motion-element">
            <a href="http://creativecommons.org/licenses/by-nc-sa/4.0" class="cc-opacity" target="_blank">
              <img src="/images/cc-by-nc-sa.svg" alt="Creative Commons" />
            </a>
          </div>
        

        <div class="links-of-author motion-element">
          
            <p class="site-author-name"></p>
            
              <span class="links-of-author-item">
              <a href="http://cloudy9101.github.io/" target="_blank">Cloudy9101</a>
              </span>
            
              <span class="links-of-author-item">
              <a href="http://blog.ligan.me/" target="_blank">Gavin's Blog</a>
              </span>
            
              <span class="links-of-author-item">
              <a href="http://zkuns.github.io/" target="_blank">Zkun's blog</a>
              </span>
            
              <span class="links-of-author-item">
              <a href="http://www.nczonline.net/blog/" target="_blank">NCZOnline</a>
              </span>
            
          
        </div>

      </div>

      

    </div>
  </div>


    </div>

    <div id="footer" class="footer">
      <div class="footer-inner">
        <div class="copyright">
  
  &copy; &nbsp;  2012 - 
  2017
  <span class="with-love">
    <i class="icon-heart"></i>
  </span>
  <span class="author">Vanilla</span>
</div>

<div class="powered-by">
  由 <a class="theme-link" href="http://hexo.io">Hexo</a> 强力驱动
</div>

<div class="theme-info">
  主题 -
  <a class="theme-link" href="https://github.com/iissnan/hexo-theme-next">
    NexT
  </a>
</div>



      </div>
    </div>

    <div class="back-to-top"></div>
  </div>

  
  

  
  <script type="text/javascript" src="/vendors/jquery-pjax/jquery.pjax.js?v=0.4.4"></script>
  <script type="text/javascript" src="/vendors/nprogress/nprogress.js?v=0.4.4"></script>
  <link rel="stylesheet" href="/vendors/nprogress/nprogress.css?v=0.4.4">
  <script type="text/javascript" src="/js/pjax-config.js"></script>


  
  <script type="text/javascript" src="/vendors/fancybox/source/jquery.fancybox.pack.js"></script>
  <script type="text/javascript" src="/js/fancy-box.js?v=0.4.4"></script>


  <script type="text/javascript" src="/js/helpers.js?v=0.4.4"></script>
  

  <script type="text/javascript" src="/vendors/velocity/velocity.min.js"></script>
  <script type="text/javascript" src="/vendors/velocity/velocity.ui.min.js"></script>

  <script type="text/javascript" src="/js/motion_global.js?v=0.4.4" id="motion.global"></script>



  <script type="text/javascript" src="/js/search-toggle.js"></script>

  
  


  <script type="text/javascript">
    $(document).ready(function () {
      if (CONFIG.sidebar === 'always') {
        displaySidebar();
      }
    });
  </script>

  

  
  

  

  

    <script type="text/javascript">
      var disqus_shortname = 'xiaofengblog';
      var disqus_identifier = '2014/08/10/网络极客移动APP经验总结/';
      var disqus_title = '网络极客移动APP经验总结';
      var disqus_url = 'http://liyaodong.com/2014/08/10/网络极客移动APP经验总结/';

      function run_disqus_script(disqus_script){
        var dsq = document.createElement('script');
        dsq.type = 'text/javascript';
        dsq.async = true;
        dsq.src = '//' + disqus_shortname + '.disqus.com/' + disqus_script;
        (document.getElementsByTagName('head')[0] || document.getElementsByTagName('body')[0]).appendChild(dsq);
      }

      run_disqus_script('count.js');
      
        run_disqus_script('embed.js');
      
    </script>
  




  
  
  <script type="text/javascript" src="/js/analytics_google-analytics.js?v=0.4.4"></script>


</body>
</html>
